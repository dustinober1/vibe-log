---
phase: 04-async-compression
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/types.ts]
autonomous: true
user_setup: []

must_haves:
  truths:
    - "RotationConfig interface includes compressionLevel field"
    - "compressionLevel is optional (defaults to 6 for balanced compression)"
    - "compressionLevel accepts values 1-9 (zlib standard levels)"
    - "Field is properly documented with JSDoc comments"
  artifacts:
    - path: "src/types.ts"
      provides: "RotationConfig interface with compressionLevel field"
      contains: "compressionLevel?: number"
  key_links:
    - from: "src/types.ts"
      to: "src/transports/file-transport.ts"
      via: "RotationConfig interface import"
      pattern: "import.*RotationConfig"
---

<objective>
Extend RotationConfig interface with compressionLevel field to support configurable gzip compression levels

Purpose: Enable users to trade compression speed for file size based on their needs
Output: Extended RotationConfig with compressionLevel field (1-9, default 6)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/04-async-compression/04-CONTEXT.md
@.planning/phases/04-async-compression/04-RESEARCH.md
@src/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add compressionLevel field to RotationConfig interface</name>
  <files>src/types.ts</files>
  <action>
    Add compressionLevel field to RotationConfig interface in src/types.ts:

    1. Add field after existing pattern field:
       ```typescript
       export interface RotationConfig {
           maxSize?: string | number;
           pattern?: 'daily';
           /**
            * Gzip compression level for rotated log files
            *
            * @remarks
            * When set, rotated log files are compressed asynchronously using gzip.
            * Compression runs fire-and-forget after rotation completes without blocking logging.
            *
            * Compression levels (zlib standard):
            * - 1: Fastest compression (larger files)
            * - 6: Balanced speed/size (default)
            * - 9: Best compression (slowest)
            *
            * Default: 6 (balanced compression)
            *
            * Example:
            * ```typescript
            * { maxSize: '100MB', compressionLevel: 1 }     // Fast compression
            * { maxSize: '100MB', compressionLevel: 9 }     // Best compression
            * { maxSize: '100MB', compressionLevel: 6 }     // Balanced (default)
            * ```
            */
           compressionLevel?: number;
       }
       ```

    2. Update interface JSDoc to mention compression:
       - Add compression to the rotation strategies list
       - Mention that compression is asynchronous and fire-and-forget
       - Note that compressionLevel is optional and defaults to 6

    DO NOT:
    - Do not add any implementation logic (this is types-only)
    - Do not modify other interfaces
    - Do not add validation logic (handled in FileTransport constructor)
  </action>
  <verify>
  Check that:
  - TypeScript compilation passes: `npm run build` or `tsc --noEmit`
  - compressionLevel field exists in RotationConfig interface
  - Field is optional (has `?`)
  - JSDoc comments document levels 1-9 and default 6
  </verify>
  <done>
  RotationConfig interface extended with compressionLevel field (1-9, default 6)
  </done>
</task>

</tasks>

<verification>
- TypeScript compilation successful
- compressionLevel field is optional and properly typed
- JSDoc comments explain compression levels and default behavior
</verification>

<success_criteria>
RotationConfig interface includes compressionLevel field that:
- Is optional (has `?`)
- Accepts numbers 1-9 (zlib standard levels)
- Defaults to 6 (balanced compression) when not specified
- Is documented with JSDoc explaining each level and use cases
</success_criteria>

<output>
After completion, create `.planning/phases/04-async-compression/04-01-SUMMARY.md`
</output>
